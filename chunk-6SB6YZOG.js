import{b as m}from"./chunk-HYMNALGP.js";import{a}from"./chunk-LDNLEIBP.js";import{a as d}from"./chunk-37B5PJ67.js";import{d as h,f as i,g as $,h as w,i as n,k as E,n as c,q as x,u as z}from"./chunk-ME2C4RST.js";import{h as u,i as Q,j as p}from"./chunk-B52P4PMX.js";import{a as s}from"./chunk-3WG2WLZ4.js";import{f}from"./chunk-FF2NHPLS.js";function q(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)}}`}function H(t,e){return`{X: ${t._x.toFixed(e)} Y: ${t._y.toFixed(e)} Z: ${t._z.toFixed(e)}}`}function J(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)} Z: ${t.z.toFixed(e)} W: ${t.w.toFixed(e)}}`}function O(t,e){return Math.acos(f(p.Dot(t,e)))*2}function I(t,e){let o=new p;return Z(t,e,o),o}function Z(t,e,o){let r=u.Cross(t,e),l=Math.acos(f(u.Dot(t,e),-1,1));return p.RotationAxisToRef(r,l,o),o}var M="cachedOperationAxis",L="cachedOperationAngle",X="cachedExecutionId",g=class extends d{constructor(e){super(h,i,o=>this._polymorphicLength(o),"FlowGraphLengthBlock",e)}_polymorphicLength(e){switch(m(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.length();default:throw new Error(`Cannot compute length of value ${e}`)}}};s("FlowGraphLengthBlock",g);var F=class extends d{constructor(e){super(h,h,o=>this._polymorphicNormalize(o),"FlowGraphNormalizeBlock",e)}_polymorphicNormalize(e){let o=m(e),r;switch(o){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return r=e.normalizeToNew(),this.config?.nanOnZeroLength&&e.length()===0&&r.setAll(NaN),r;default:throw new Error(`Cannot normalize value ${e}`)}}};s("FlowGraphNormalizeBlock",F);var y=class extends a{constructor(e){super(h,h,i,(o,r)=>this._polymorphicDot(o,r),"FlowGraphDotBlock",e)}_polymorphicDot(e,o){switch(m(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.dot(o);default:throw new Error(`Cannot get dot product of ${e} and ${o}`)}}};s("FlowGraphDotBlock",y);var G=class extends a{constructor(e){super(n,n,n,(o,r)=>u.Cross(o,r),"FlowGraphCrossBlock",e)}};s("FlowGraphCrossBlock",G);var T=class extends a{constructor(e){super(w,i,w,(o,r)=>o.rotate(r),"FlowGraphRotate2DBlock",e)}};s("FlowGraphRotate2DBlock",T);var B=class extends a{constructor(e){super(n,c,n,(o,r)=>o.applyRotationQuaternion(r),"FlowGraphRotate3DBlock",e)}};s("FlowGraphRotate3DBlock",B);function j(t,e){switch(m(t)){case"Vector2":return e.transformVector(t);case"Vector3":return e.transformVector(t);case"Vector4":return t=t,new Q(t.x*e.m[0]+t.y*e.m[1]+t.z*e.m[2]+t.w*e.m[3],t.x*e.m[4]+t.y*e.m[5]+t.z*e.m[6]+t.w*e.m[7],t.x*e.m[8]+t.y*e.m[9]+t.z*e.m[10]+t.w*e.m[11],t.x*e.m[12]+t.y*e.m[13]+t.z*e.m[14]+t.w*e.m[15]);default:throw new Error(`Cannot transform value ${t}`)}}var A=class extends a{constructor(e){let o=e?.vectorType||"Vector3",r=o==="Vector2"?"Matrix2D":o==="Vector3"?"Matrix3D":"Matrix";super(x(o),x(r),x(o),j,"FlowGraphTransformVectorBlock",e)}};s("FlowGraphTransformVectorBlock",A);var N=class extends a{constructor(e){super(n,E,n,(o,r)=>u.TransformCoordinates(o,r),"FlowGraphTransformCoordinatesBlock",e)}};s("FlowGraphTransformCoordinatesBlock",N);var _=class extends d{constructor(e){super(c,c,o=>o.conjugate(),"FlowGraphConjugateBlock",e)}};s("FlowGraphConjugateBlock",_);var D=class extends a{constructor(e){super(c,c,i,(o,r)=>O(o,r),"FlowGraphAngleBetweenBlock",e)}};s("FlowGraphAngleBetweenBlock",D);var R=class extends a{constructor(e){super(n,i,c,(o,r)=>p.RotationAxis(o,r),"FlowGraphQuaternionFromAxisAngleBlock",e)}};s("FlowGraphQuaternionFromAxisAngleBlock",R);var k=class extends z{constructor(e){super(e),this.a=this.registerDataInput("a",c),this.axis=this.registerDataOutput("axis",n),this.angle=this.registerDataOutput("angle",i),this.isValid=this.registerDataOutput("isValid",$)}_updateOutputs(e){let o=e._getExecutionVariable(this,X,-1),r=e._getExecutionVariable(this,M,null),l=e._getExecutionVariable(this,L,null);if(r!=null&&l!==void 0&&l!==null&&o===e.executionId)this.axis.setValue(r,e),this.angle.setValue(l,e);else try{let{axis:V,angle:C}=this.a.getValue(e).toAxisAngle();e._setExecutionVariable(this,M,V),e._setExecutionVariable(this,L,C),e._setExecutionVariable(this,X,e.executionId),this.axis.setValue(V,e),this.angle.setValue(C,e),this.isValid.setValue(!0,e)}catch{this.isValid.setValue(!1,e)}}getClassName(){return"FlowGraphAxisAngleFromQuaternionBlock"}};s("FlowGraphAxisAngleFromQuaternionBlock",k);var Y=class extends a{constructor(e){super(n,n,c,(o,r)=>I(o,r),"FlowGraphQuaternionFromDirectionsBlock",e)}};export{q as a,H as b,J as c,g as d,F as e,y as f,G as g,T as h,B as i,A as j,N as k,_ as l,D as m,R as n,k as o,Y as p};
