import{a as c}from"./chunk-BAAXG6PJ.js";import{d as o}from"./chunk-ME2C4RST.js";import{a as l}from"./chunk-3WG2WLZ4.js";var u=class extends c{constructor(t){super(t),this.config=t,this.object=this.registerDataInput("object",o,t.target),this.value=this.registerDataInput("value",o),this.propertyName=this.registerDataInput("propertyName",o,t.propertyName),this.customSetFunction=this.registerDataInput("customSetFunction",o)}_execute(t,a){try{let r=this.object.getValue(t),e=this.value.getValue(t),i=this.propertyName.getValue(t);this._stopRunningAnimations(t,r,i);let n=this.customSetFunction.getValue(t);n?n(r,i,e,t):this._setPropertyValue(r,i,e)}catch(r){this._reportError(t,r)}this.out._activateSignal(t)}_stopRunningAnimations(t,a,r){let e=t._getGlobalContextVariable("currentlyRunningAnimationGroups",[]);for(let i of e){let n=t.assetsContext.animationGroups.find(s=>s.uniqueId===i);if(n){for(let s of n.targetedAnimations)if(s.target===a&&s.animation.targetProperty===r){n.stop(!0),n.dispose();let p=e.indexOf(i);p!==-1&&(e.splice(p,1),t._setGlobalContextVariable("currentlyRunningAnimationGroups",e))}}}}_setPropertyValue(t,a,r){let e=a.split("."),i=t;for(let n=0;n<e.length-1;n++){let s=e[n];i[s]===void 0&&(i[s]={}),i=i[s]}i[e[e.length-1]]=r}getClassName(){return"FlowGraphSetPropertyBlock"}};l("FlowGraphSetPropertyBlock",u);export{u as a};
